<!DOCTYPE html><html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>نظام أمن الفندق</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css">
  <style>
    body.dark-mode {
      background-color: #121212;
      color: white;
    }
    .dark-mode .form-control, .dark-mode .form-select {
      background-color: #1e1e1e;
      color: white;
    }
    #time {
      font-weight: bold;
    }
  </style>
</head>
<body class="p-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1>نظام أمن الفندق</h1>
    <button id="toggleMode" class="btn btn-secondary">تبديل الوضع</button>
  </div>  <div id="time" class="mb-4 text-end"></div>  <form id="guestForm" class="mb-4">
    <div class="row g-3">
      <div class="col-md-4">
        <label class="form-label">رقم السيارة</label>
        <input type="text" class="form-control" id="carNumber" required>
      </div>
      <div class="col-md-4">
        <label class="form-label">اسم الضيف</label>
        <input type="text" class="form-control" id="guestName" required>
      </div>
      <div class="col-md-4">
        <label class="form-label">رقم الغرفة</label>
        <input type="text" class="form-control" id="roomNumber">
      </div>
      <div class="col-md-6">
        <label class="form-label">تاريخ الوصول</label>
        <input type="date" class="form-control" id="checkIn" required>
      </div>
      <div class="col-md-6">
        <label class="form-label">تاريخ المغادرة</label>
        <input type="date" class="form-control" id="checkOut" required>
      </div>
      <div class="col-md-6">
        <label class="form-label">نوع الضيف</label>
        <select class="form-select" id="guestType">
          <option value="هادئ">هادئ</option>
          <option value="عصبي">عصبي</option>
          <option value="اجتماعي">اجتماعي</option>
          <option value="روش">روش</option>
        </select>
      </div>
      <div class="col-md-6">
        <label class="form-label">الترحيب المفضل</label>
        <input type="text" class="form-control" id="greeting">
      </div>
    </div>
    <button type="submit" class="btn btn-primary mt-3">إضافة الضيف</button>
  </form>  <div class="mb-4">
    <label class="form-label">ابحث برقم السيارة</label>
    <input type="text" class="form-control" id="searchCar" placeholder="ادخل رقم السيارة...">
    <ul id="results" class="list-group mt-2"></ul>
  </div>  <script>
    const guestForm = document.getElementById('guestForm');
    const carNumber = document.getElementById('carNumber');
    const guestName = document.getElementById('guestName');
    const roomNumber = document.getElementById('roomNumber');
    const checkIn = document.getElementById('checkIn');
    const checkOut = document.getElementById('checkOut');
    const guestType = document.getElementById('guestType');
    const greeting = document.getElementById('greeting');
    const searchCar = document.getElementById('searchCar');
    const results = document.getElementById('results');

    function updateClock() {
      const now = new Date();
      document.getElementById('time').innerText = now.toLocaleString();
    }
    setInterval(updateClock, 1000);

    function loadGuests() {
      const guests = JSON.parse(localStorage.getItem('guests') || '[]');
      return guests.filter(g => new Date(g.checkOut) >= new Date());
    }

    function saveGuest(guest) {
      const guests = JSON.parse(localStorage.getItem('guests') || '[]');
      guests.push(guest);
      localStorage.setItem('guests', JSON.stringify(guests));
    }

    guestForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const guest = {
        carNumber: carNumber.value,
        guestName: guestName.value,
        roomNumber: roomNumber.value,
        checkIn: checkIn.value,
        checkOut: checkOut.value,
        guestType: guestType.value,
        greeting: greeting.value,
      };
      saveGuest(guest);
      alert('تم إضافة الضيف');
      guestForm.reset();
    });

    searchCar.addEventListener('input', () => {
      const guests = JSON.parse(localStorage.getItem('guests') || '[]');
      const query = searchCar.value.trim();
      results.innerHTML = '';
      if (query) {
        const found = guests.filter(g => g.carNumber.includes(query));
        for (let g of found) {
          const li = document.createElement('li');
          li.className = 'list-group-item';
          li.innerText = `الاسم: ${g.guestName}، الغرفة: ${g.roomNumber}، من: ${g.checkIn} إلى ${g.checkOut}`;
          results.appendChild(li);
        }
      }
    });

    // Toggle Mode
    document.getElementById('toggleMode').onclick = () => {
      document.body.classList.toggle('dark-mode');
    };
  </script></body>
</html>
